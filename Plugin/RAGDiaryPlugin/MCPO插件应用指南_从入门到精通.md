# MCPO æ’ä»¶åº”ç”¨æŒ‡å—ï¼šæ‰“å¼€å·¥å…·ç”Ÿæ€çš„å¤§é—¨

> **ä½œè€…**: è·¯è¾¹ä¸€æ¡å°ç™½ & æµ®æµ®é…±
> **æ–‡æ¡£ç‰ˆæœ¬**: 1.0 (äº’åŠ¨æ€è€ƒç‰ˆ)
> **æ›´æ–°æ—¥æœŸ**: 2025-10-03
> **æ ¸å¿ƒä¸»é¢˜**: MCP å·¥å…·ç”Ÿæ€ä¸ VCP ç³»ç»Ÿçš„å®Œç¾èåˆ

---

## ğŸ“– é˜…è¯»å¼•å¯¼

è¿™æ˜¯ä¸€ä»½é‡‡ç”¨**äº’åŠ¨æ€è€ƒ**æ–¹å¼æ’°å†™çš„åº”ç”¨æŒ‡å—ã€‚æˆ‘ä»¬ä¼šé€šè¿‡æé—®ã€æ€è€ƒã€è§£ç­”çš„æ–¹å¼ï¼Œå¸®åŠ©ä½ æ·±å…¥ç†è§£ MCPO æ’ä»¶ã€‚

å¦‚æœä½ æƒ³çŸ¥é“ï¼š
- **ä»€ä¹ˆæ˜¯** MCP (Model Context Protocol)ï¼Ÿå®ƒè§£å†³äº†ä»€ä¹ˆé—®é¢˜ï¼Ÿ
- **ä¸ºä»€ä¹ˆ** VCP éœ€è¦ MCPO æ’ä»¶ï¼Ÿ
- **å¦‚ä½•** ä½¿ç”¨ MCPO æ’ä»¶æ‰©å±• VCP çš„èƒ½åŠ›ï¼Ÿ
- **æ€æ ·** åˆ›å»ºå’Œç®¡ç†è‡ªå·±çš„ MCP å·¥å…·ï¼Ÿ

é‚£ä¹ˆï¼Œè®©æˆ‘ä»¬å¼€å§‹è¿™åœºæ¢ç´¢ä¹‹æ—…å§ï¼

---

## ğŸ¯ æ ¸å¿ƒæ¦‚å¿µé€ŸæŸ¥è¡¨

åœ¨æ·±å…¥é˜…è¯»ä¹‹å‰ï¼Œå…ˆå¿«é€Ÿæµè§ˆè¿™äº›å…³é”®æ¦‚å¿µï¼š

### MCP æ ¸å¿ƒæ¦‚å¿µ
| æ¦‚å¿µ | ä¸€å¥è¯è§£é‡Š | ä»·å€¼ |
|-----|----------|------|
| **MCP (Model Context Protocol)** | AI æ¨¡å‹ä¸å·¥å…·é€šä¿¡çš„æ ‡å‡†åè®® | ç»Ÿä¸€å·¥å…·æ¥å£ï¼Œæ‰“ç ´å·¥å…·å­¤å²› |
| **MCPO** | MCP Orchestrator çš„ç¼©å†™ | VCP çš„ MCP å·¥å…·æ¡¥æ¥å™¨ |
| **Tool (å·¥å…·)** | æ‰©å±• AI èƒ½åŠ›çš„å¤–éƒ¨åŠŸèƒ½æ¨¡å— | è®© AI èƒ½è®¿é—®æ•°æ®ã€æ‰§è¡Œæ“ä½œ |
| **Server (æœåŠ¡å™¨)** | æä¾›å·¥å…·çš„ MCP æœåŠ¡ | å·¥å…·çš„æä¾›æ–¹ |

### MCPO æ ¸å¿ƒèƒ½åŠ›
| åŠŸèƒ½ | ä½œç”¨ | ä½¿ç”¨åœºæ™¯ |
|-----|------|---------|
| **è‡ªåŠ¨å‘ç°** | æ‰«æå¹¶è¯†åˆ«æ‰€æœ‰å¯ç”¨å·¥å…· | å·¥å…·ç®¡ç†ã€ç”Ÿæ€æ‰©å±• |
| **å·¥å…·è°ƒç”¨** | ä»£ç† VCP ä¸ MCP å·¥å…·é€šä¿¡ | æ ¸å¿ƒåŠŸèƒ½ï¼Œå·¥å…·ä½¿ç”¨ |
| **é…ç½®ç®¡ç†** | å¤šé…ç½®æ–‡ä»¶åˆ‡æ¢å’Œçƒ­é‡è½½ | ä¸åŒåœºæ™¯ã€å¿«é€Ÿåˆ‡æ¢ |
| **æœåŠ¡ç®¡ç†** | å¯åœã€ç›‘æ§ MCPO æœåŠ¡ | è¿ç»´ã€æ•…éšœæ’æŸ¥ |

### å¿«é€Ÿå¯¹æ¯”
| æ–¹é¢ | ä¼ ç»Ÿ VCP æ’ä»¶ | MCPO + MCP å·¥å…· | ä¼˜åŠ¿ |
|-----|-------------|----------------|------|
| å¼€å‘éš¾åº¦ | éœ€è¦äº†è§£ VCP æ’ä»¶ API | ç¬¦åˆ MCP æ ‡å‡†å³å¯ | âœ¨ æ›´ç®€å• |
| å·¥å…·å¤ç”¨ | ä»…é™ VCP ç”Ÿæ€ | å…¨çƒ MCP ç”Ÿæ€ | âœ¨ ç”Ÿæ€æ›´å¤§ |
| ç»´æŠ¤æˆæœ¬ | è·Ÿéš VCP æ›´æ–° | ç‹¬ç«‹äº VCP | âœ¨ æ›´ç¨³å®š |
| é…ç½®çµæ´»æ€§ | å•ä¸€é…ç½® | å¤šé…ç½®çƒ­åˆ‡æ¢ | âœ¨ æ›´çµæ´» |

---

## ğŸ—ºï¸ æ–‡æ¡£æ€ç»´å¯¼å›¾

```
MCPO æ’ä»¶åº”ç”¨æŒ‡å—
â”‚
â”œâ”€â”€ ğŸ“ ç¬¬ä¸€ç« ï¼šç†è§£ MCP
â”‚   â”œâ”€â”€ é—®é¢˜ 1: ä»€ä¹ˆæ˜¯ MCPï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ
â”‚   â”‚   â”œâ”€â”€ AI å·¥å…·çš„ç¢ç‰‡åŒ–é—®é¢˜
â”‚   â”‚   â”œâ”€â”€ MCP çš„ç»Ÿä¸€åè®®è§£å†³æ–¹æ¡ˆ
â”‚   â”‚   â””â”€â”€ MCP ç”Ÿæ€çš„ä»·å€¼
â”‚   â”œâ”€â”€ é—®é¢˜ 2: MCP å¦‚ä½•å·¥ä½œï¼Ÿ
â”‚   â”‚   â”œâ”€â”€ Client-Server æ¶æ„
â”‚   â”‚   â”œâ”€â”€ ä¸‰ç§é€šä¿¡æ–¹å¼ï¼ˆStdio/SSE/HTTPï¼‰
â”‚   â”‚   â””â”€â”€ å·¥å…·æ³¨å†Œä¸è°ƒç”¨æµç¨‹
â”‚   â””â”€â”€ é—®é¢˜ 3: MCPO åœ¨ VCP ä¸­æ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Ÿ
â”‚       â”œâ”€â”€ æ¡¥æ¥å™¨å®šä½
â”‚       â”œâ”€â”€ è‡ªåŠ¨åŒ–å·¥å…·ç®¡ç†
â”‚       â””â”€â”€ VCP æ’ä»¶ç”Ÿæ€çš„è¡¥å……
â”‚
â”œâ”€â”€ ğŸ“ ç¬¬äºŒç« ï¼šå¿«é€Ÿä¸Šæ‰‹
â”‚   â”œâ”€â”€ é—®é¢˜ 4: å¦‚ä½•å®‰è£… MCPO æ’ä»¶ï¼Ÿ
â”‚   â”‚   â”œâ”€â”€ å‰ç½®ä¾èµ–ï¼ˆPythonã€mcpoã€MCP æœåŠ¡å™¨ï¼‰
â”‚   â”‚   â”œâ”€â”€ é…ç½®æ–‡ä»¶è¯´æ˜
â”‚   â”‚   â””â”€â”€ é¦–æ¬¡å¯åŠ¨éªŒè¯
â”‚   â”œâ”€â”€ é—®é¢˜ 5: å¦‚ä½•ä½¿ç”¨ç¬¬ä¸€ä¸ª MCP å·¥å…·ï¼Ÿ
â”‚   â”‚   â”œâ”€â”€ æ—¶é—´å·¥å…·ç¤ºä¾‹
â”‚   â”‚   â”œâ”€â”€ è°ƒç”¨æ ¼å¼è¯¦è§£
â”‚   â”‚   â””â”€â”€ ç»“æœè§£æ
â”‚   â””â”€â”€ é—®é¢˜ 6: å¦‚ä½•æ·»åŠ æ–°çš„ MCP å·¥å…·ï¼Ÿ
â”‚       â”œâ”€â”€ é…ç½® mcp-config.json
â”‚       â”œâ”€â”€ å®‰è£… MCP æœåŠ¡å™¨
â”‚       â””â”€â”€ å·¥å…·å‘ç°ä¸éªŒè¯
â”‚
â”œâ”€â”€ ğŸ“ ç¬¬ä¸‰ç« ï¼šé«˜çº§åº”ç”¨
â”‚   â”œâ”€â”€ é—®é¢˜ 7: å¦‚ä½•ç®¡ç†å¤šä¸ªé…ç½®åœºæ™¯ï¼Ÿ
â”‚   â”‚   â”œâ”€â”€ å¤šé…ç½®æ–‡ä»¶ç»„ç»‡
â”‚   â”‚   â”œâ”€â”€ é…ç½®çƒ­åˆ‡æ¢æœºåˆ¶
â”‚   â”‚   â””â”€â”€ æœ€ä½³å®è·µ
â”‚   â”œâ”€â”€ é—®é¢˜ 8: å¦‚ä½•æ„å»ºè‡ªå·±çš„ MCP å·¥å…·ï¼Ÿ
â”‚   â”‚   â”œâ”€â”€ MCP æœåŠ¡å™¨å¼€å‘åŸºç¡€
â”‚   â”‚   â”œâ”€â”€ å·¥å…·æ³¨å†Œä¸å®ç°
â”‚   â”‚   â””â”€â”€ ä¸ MCPO é›†æˆ
â”‚   â””â”€â”€ é—®é¢˜ 9: å¦‚ä½•æ’æŸ¥å’Œä¼˜åŒ–ï¼Ÿ
â”‚       â”œâ”€â”€ å¸¸è§é—®é¢˜è¯Šæ–­
â”‚       â”œâ”€â”€ æ€§èƒ½ä¼˜åŒ–ç­–ç•¥
â”‚       â””â”€â”€ ç›‘æ§ä¸æ—¥å¿—
â”‚
â””â”€â”€ ğŸ“ ç¬¬å››ç« ï¼šå®æˆ˜æ¡ˆä¾‹
    â”œâ”€â”€ æ¡ˆä¾‹ 1: æ„å»ºæ–‡æ¡£æ£€ç´¢åŠ©æ‰‹
    â”œâ”€â”€ æ¡ˆä¾‹ 2: å®ç°æ–‡ä»¶ç³»ç»Ÿæ“ä½œ
    â”œâ”€â”€ æ¡ˆä¾‹ 3: åˆ›å»ºçŸ¥è¯†è®°å¿†ç³»ç»Ÿ
    â””â”€â”€ æ¡ˆä¾‹ 4: é›†æˆå¤–éƒ¨ API æœåŠ¡
```

---

## ğŸ’¡ å¿«é€Ÿå¯¼èˆª

**ä¸åŒè¯»è€…çš„é˜…è¯»è·¯å¾„**ï¼š

- ğŸ“ **åˆå­¦è€…** â†’ ä»ç¬¬ä¸€ç« å¼€å§‹ï¼Œç†è§£ MCP æ¦‚å¿µå’Œä»·å€¼
- ğŸ’¼ **ç³»ç»Ÿç®¡ç†å‘˜** â†’ ç›´æ¥çœ‹ç¬¬äºŒç« ï¼Œå¿«é€Ÿéƒ¨ç½²å’Œé…ç½®
- ğŸ‘¨â€ğŸ’» **å·¥å…·å¼€å‘è€…** â†’ ç¬¬ä¸‰ç« é—®é¢˜ 8ï¼Œå­¦ä¹ è‡ªå®šä¹‰å·¥å…·å¼€å‘
- ğŸ› **è¿ç»´äººå‘˜** â†’ ç¬¬ä¸‰ç« é—®é¢˜ 9ï¼ŒæŒæ¡æ•…éšœæ’æŸ¥å’Œä¼˜åŒ–

**é¢„è®¡é˜…è¯»æ—¶é—´**ï¼š
- å®Œæ•´ç²¾è¯»ï¼š45-60 åˆ†é’Ÿ
- å¿«é€Ÿä¸Šæ‰‹ï¼š10-15 åˆ†é’Ÿï¼ˆé€ŸæŸ¥è¡¨ + ç¬¬äºŒç« ï¼‰
- å¼€å‘å‚è€ƒï¼š20-30 åˆ†é’Ÿï¼ˆç¬¬ä¸‰ç« ï¼‰

---

## ğŸš¨ é‡è¦æç¤ºï¼šAI æç¤ºè¯é…ç½®

### è®© AI è‡ªåŠ¨è¯†åˆ« MCPO çŠ¶æ€

åœ¨ AI çš„ç³»ç»Ÿæç¤ºè¯ä¸­æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ŒAI å°±èƒ½è‡ªåŠ¨çŸ¥é“ MCPO æœåŠ¡æ˜¯å¦å¯åŠ¨ï¼Œå¹¶ä¸»åŠ¨ä½¿ç”¨å·¥å…·ï¼š

```
# MCPO å·¥å…·ç³»ç»ŸçŠ¶æ€
MCPO æœåŠ¡å™¨çŠ¶æ€ï¼š{{MCPOServiceStatus}}

# MCPO ä¸­æ‰€æœ‰å¯ä»¥ä½¿ç”¨çš„å·¥å…·
{{VCPMCPO}}
```

**é…ç½®è¯´æ˜**ï¼š
- `{{MCPOServiceStatus}}` - è‡ªåŠ¨æ˜¾ç¤º MCPO æœåŠ¡å™¨çš„è¿è¡ŒçŠ¶æ€ï¼ˆrunning/stoppedï¼‰
- `{{VCPMCPO}}` - è‡ªåŠ¨åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ MCP å·¥å…·åŠå…¶ä½¿ç”¨æ–¹æ³•

**æ•ˆæœ**ï¼š
- âœ… AI å¯ä»¥è‡ªåŠ¨åˆ¤æ–­ MCPO æ˜¯å¦å¯ç”¨
- âœ… AI çŸ¥é“å½“å‰æœ‰å“ªäº›å·¥å…·å¯ä»¥è°ƒç”¨
- âœ… AI èƒ½ä¸»åŠ¨é€‰æ‹©åˆé€‚çš„å·¥å…·å®Œæˆä»»åŠ¡

### æ‰‹åŠ¨æŸ¥çœ‹ MCPO çŠ¶æ€

**MCPO Web ç®¡ç†ç•Œé¢**ï¼š
```
http://0.0.0.0:9000/docs
```

**å¯ä»¥çœ‹åˆ°**ï¼š
- âœ… MCPO æœåŠ¡å™¨è¿è¡ŒçŠ¶æ€
- âœ… å½“å‰æ³¨å†Œçš„æ‰€æœ‰ MCP æœåŠ¡å™¨
- âœ… æ¯ä¸ªæœåŠ¡å™¨æä¾›çš„å·¥å…·åˆ—è¡¨
- âœ… å·¥å…·çš„å‚æ•°è¯´æ˜å’Œç¤ºä¾‹
- âœ… åœ¨çº¿æµ‹è¯•å·¥å…·è°ƒç”¨

**é‡è¦æé†’** âš ï¸ï¼š
- VCP å…³é—­æ—¶ï¼Œè®°å¾—è®© AI å¸®ä½ å…³é—­ MCPO æœåŠ¡
- å¦åˆ™ MCPO ä¼šä¸€ç›´åœ¨åå°è¿è¡Œï¼Œå ç”¨ç«¯å£å’Œèµ„æº
- å…³é—­å‘½ä»¤ï¼šè®© AI æ‰§è¡Œ `è¯·åœæ­¢ MCPO æœåŠ¡å™¨`

### å·¥å…·ä¸æ˜¾ç¤ºçš„æ’æŸ¥

å¦‚æœåœ¨ `http://0.0.0.0:9000/docs` çœ‹ä¸åˆ°æ·»åŠ çš„ MCP å·¥å…·ï¼Œå¯èƒ½åŸå› ï¼š

**1. é…ç½®æ ¼å¼ä¸å¯¹**
```json
// âŒ é”™è¯¯ç¤ºä¾‹
{
  "tool_name": {
    "command": "python -m tool"  // é”™è¯¯ï¼šcommand å’Œ args è¦åˆ†å¼€
  }
}

// âœ… æ­£ç¡®ç¤ºä¾‹
{
  "tool_name": {
    "command": "python",
    "args": ["-m", "tool"]
  }
}
```

**2. MCP æœåŠ¡å™¨ä¸å…¼å®¹**
- ç¡®ä¿ MCP æœåŠ¡å™¨ç¬¦åˆ MCP åè®®æ ‡å‡†
- æ£€æŸ¥ MCP æœåŠ¡å™¨æ˜¯å¦æ­£ç¡®å®‰è£…
- å°è¯•æ‰‹åŠ¨å¯åŠ¨ MCP æœåŠ¡å™¨æµ‹è¯•

**3. ç«¯å£æˆ–æƒé™é—®é¢˜**
- æ£€æŸ¥ Python/Node.js å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„
- ç¡®è®¤æœ‰è¶³å¤Ÿçš„æ–‡ä»¶ç³»ç»Ÿæƒé™
- æŸ¥çœ‹ MCPO æ—¥å¿—æ’æŸ¥é”™è¯¯

### ğŸŒŸ plugged.inï¼šä¸€ç«™å¼ MCP èšåˆæœåŠ¡

**æœåŠ¡åœ°å€**ï¼šhttps://plugged.in/

**æ ¸å¿ƒä¼˜åŠ¿**ï¼š
- ğŸ¯ **èšåˆæ‰€æœ‰ MCP** - ä¸€ä¸ªå…¥å£è®¿é—®å…¨çƒ MCP å·¥å…·
- ğŸ†“ **å®Œå…¨å…è´¹** - æ— éœ€ä»˜è´¹ï¼Œå¼€ç®±å³ç”¨
- ğŸ”Œ **å³æ’å³ç”¨** - åªéœ€æ·»åŠ ä¸€ä¸ª MCP é…ç½®

**é…ç½®æ–¹æ³•**ï¼š

**Step 1: è®¿é—® plugged.in è·å–é…ç½®**
```
https://plugged.in/
```

**Step 2: æ·»åŠ åˆ° mcp-config.json**

å‚è€ƒé¡¹ç›®ï¼šhttps://github.com/VeriTeknik/pluggedin-mcp

```json
{
  "mcpServers": {
    "pluggedin": {
      "command": "npx",
      "args": ["-y", "pluggedin-mcp"],
      "env": {
        "PLUGGEDIN_API_KEY": "your_api_key_here"
      }
    }
  }
}
```

**Step 3: é‡å¯ MCPO æœåŠ¡**
```
è¯·é‡å¯ MCPO æœåŠ¡å™¨
```

**ä½¿ç”¨åœºæ™¯**ï¼š
- âœ… å¿«é€Ÿä½“éªŒå¤§é‡ MCP å·¥å…·
- âœ… æ¢ç´¢ MCP ç”Ÿæ€èƒ½åŠ›
- âœ… åŸå‹å¼€å‘å’Œæµ‹è¯•
- âš ï¸ å¸¸ç”¨å·¥å…·å»ºè®®æ”¹è£…æˆ VCP åŸç”Ÿæ’ä»¶ï¼ˆæ€§èƒ½æ›´å¥½ï¼‰

**æ€§èƒ½å¯¹æ¯”**ï¼š
```
plugged.inï¼ˆé€‚åˆæ¢ç´¢é˜¶æ®µï¼‰
â”œâ”€ ä¼˜åŠ¿ï¼šå³æ’å³ç”¨ï¼Œå·¥å…·ä¸°å¯Œ
â””â”€ åŠ£åŠ¿ï¼šç½‘ç»œå»¶è¿Ÿï¼Œä¾èµ–å¤–éƒ¨æœåŠ¡

VCP åŸç”Ÿæ’ä»¶ï¼ˆé€‚åˆç”Ÿäº§ä½¿ç”¨ï¼‰
â”œâ”€ ä¼˜åŠ¿ï¼šæœ¬åœ°æ‰§è¡Œï¼Œæ€§èƒ½æœ€ä¼˜
â””â”€ åŠ£åŠ¿ï¼šéœ€è¦å¼€å‘å·¥ä½œ
```

---

# ç¬¬ä¸€ç« ï¼šç†è§£ MCP

## ğŸ¤” é—®é¢˜ä¸€ï¼šä»€ä¹ˆæ˜¯ MCPï¼Ÿä¸ºä»€ä¹ˆéœ€è¦å®ƒï¼Ÿ

### å…ˆçœ‹ä¸€ä¸ªåœºæ™¯

å‡è®¾ä½ æƒ³è®© AI å®Œæˆä»¥ä¸‹ä»»åŠ¡ï¼š
- è·å–å½“å‰æ—¶é—´
- æœç´¢ç½‘ç»œä¿¡æ¯
- è¯»å†™æ–‡ä»¶
- æŸ¥è¯¢æ•°æ®åº“
- è°ƒç”¨ API

**ä¼ ç»Ÿæ–¹æ¡ˆ**çš„å›°å¢ƒï¼š
```
æ¯ä¸ªå·¥å…·éƒ½æœ‰è‡ªå·±çš„æ¥å£ï¼š
- æ—¶é—´å·¥å…·ï¼štime.get_current()
- æœç´¢å·¥å…·ï¼šsearch.query(q)
- æ–‡ä»¶å·¥å…·ï¼šfile.read(path)
- æ•°æ®åº“å·¥å…·ï¼šdb.query(sql)
- API å·¥å…·ï¼šapi.call(endpoint)

AI éœ€è¦å­¦ä¹ æ¯ä¸ªå·¥å…·çš„ï¼š
âœ— ä¸åŒçš„è°ƒç”¨æ–¹å¼
âœ— ä¸åŒçš„å‚æ•°æ ¼å¼
âœ— ä¸åŒçš„é”™è¯¯å¤„ç†
âœ— ä¸åŒçš„èº«ä»½è®¤è¯
```

**ç»“æœ**ï¼šå·¥å…·è¶Šå¤šï¼ŒAI è¶Šæ··ä¹±ï¼Œå¼€å‘è€…è¶Šç—›è‹¦ (â•¥ï¹â•¥)

### MCP çš„è§£å†³æ–¹æ¡ˆ

> **Model Context Protocol (MCP)** - Anthropic äº 2024 å¹´å‘å¸ƒçš„å¼€æ”¾æ ‡å‡†

**æ ¸å¿ƒç†å¿µ**ï¼šç»Ÿä¸€æ‰€æœ‰å·¥å…·çš„é€šä¿¡æ¥å£

```
æ‰€æœ‰å·¥å…·éƒ½éµå¾ªåŒä¸€å¥—è§„èŒƒï¼š

Client (AI/VCP)
    â†“ [ç»Ÿä¸€çš„ MCP åè®®]
    â”œâ”€â†’ Time Server (æ—¶é—´å·¥å…·)
    â”œâ”€â†’ Search Server (æœç´¢å·¥å…·)
    â”œâ”€â†’ File Server (æ–‡ä»¶å·¥å…·)
    â”œâ”€â†’ Database Server (æ•°æ®åº“å·¥å…·)
    â””â”€â†’ API Server (API å·¥å…·)

AI åªéœ€è¦å­¦ä¹ ï¼š
âœ“ ä¸€ç§è°ƒç”¨æ–¹å¼
âœ“ ä¸€ç§å‚æ•°æ ¼å¼
âœ“ ä¸€ç§é”™è¯¯å¤„ç†
âœ“ ä¸€ç§èº«ä»½è®¤è¯
```

### MCP ç”Ÿæ€çš„ä»·å€¼

æˆªè‡³ 2025 å¹´ 10 æœˆï¼š
- ğŸŒ **å…¨çƒç”Ÿæ€**ï¼š500+ å¼€æº MCP æœåŠ¡å™¨
- ğŸ”§ **è¦†ç›–é¢†åŸŸ**ï¼šæ–‡ä»¶ç³»ç»Ÿã€æ•°æ®åº“ã€APIã€æœç´¢ã€çŸ¥è¯†åº“ã€ä»£ç æ‰§è¡Œ...
- ğŸ’ª **ç¤¾åŒºæ´»è·ƒ**ï¼šGitHubã€npmã€PyPI æŒç»­æ›´æ–°

**è¿™æ„å‘³ç€**ï¼š
- âœ… ä¸ç”¨é‡å¤é€ è½®å­ - ç›´æ¥ä½¿ç”¨ç°æˆå·¥å…·
- âœ… å·¥å…·å¯å¤ç”¨ - ä¸€ä¸ª MCP å·¥å…·å¯ç”¨äºä»»ä½•æ”¯æŒ MCP çš„ AI ç³»ç»Ÿ
- âœ… ç”Ÿæ€å…±å»º - ä½ å¼€å‘çš„å·¥å…·ä¹Ÿèƒ½è¢«å…¨çƒä½¿ç”¨

---

## ğŸ¤” é—®é¢˜äºŒï¼šMCP å¦‚ä½•å·¥ä½œï¼Ÿ

### Client-Server æ¶æ„

MCP é‡‡ç”¨ç»å…¸çš„å®¢æˆ·ç«¯-æœåŠ¡å™¨æ¨¡å‹ï¼š

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   MCP Client    â”‚          â”‚   MCP Server     â”‚
â”‚   (VCP/AI)      â”‚ â—„â”€â”€â”€â”€â”€â–º â”‚   (å·¥å…·æä¾›æ–¹)    â”‚
â”‚                 â”‚   MCP    â”‚                  â”‚
â”‚  - å‘ç°å·¥å…·     â”‚ Protocol â”‚  - æ³¨å†Œå·¥å…·      â”‚
â”‚  - è°ƒç”¨å·¥å…·     â”‚          â”‚  - å¤„ç†è¯·æ±‚      â”‚
â”‚  - å¤„ç†ç»“æœ     â”‚          â”‚  - è¿”å›ç»“æœ      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸‰ç§é€šä¿¡æ–¹å¼

MCP æ”¯æŒä¸‰ç§é€šä¿¡ä¼ è¾“å±‚ï¼š

#### 1. **Stdio (æ ‡å‡†è¾“å…¥è¾“å‡º)** - æ¨èæ–¹å¼

```json
{
  "time": {
    "command": "python",
    "args": ["-m", "mcp_server_time"]
  }
}
```

**ç‰¹ç‚¹**ï¼š
- âœ… æœ€ç®€å• - è¿›ç¨‹é—´é€šä¿¡
- âœ… æœ€ç¨³å®š - ä¸ä¾èµ–ç½‘ç»œ
- âœ… æœ€å®‰å…¨ - æœ¬åœ°æ‰§è¡Œ
- âŒ å•æœºé™åˆ¶ - æ— æ³•è·¨æœºå™¨

#### 2. **SSE (Server-Sent Events)** - è¿œç¨‹è®¿é—®

```json
{
  "remote_tool": {
    "type": "sse",
    "url": "http://remote-server:8001/sse",
    "headers": {
      "Authorization": "Bearer token"
    }
  }
}
```

**ç‰¹ç‚¹**ï¼š
- âœ… æ”¯æŒè¿œç¨‹ - å¯è·¨æœºå™¨éƒ¨ç½²
- âœ… å®æ—¶æ¨é€ - æœåŠ¡å™¨ä¸»åŠ¨é€šçŸ¥
- âŒ éœ€è¦ç½‘ç»œ - ä¾èµ–ç½‘ç»œç¨³å®šæ€§

#### 3. **Streamable HTTP** - ä¼ä¸šçº§æ–¹æ¡ˆ

```json
{
  "enterprise_tool": {
    "type": "streamable-http",
    "url": "http://api.company.com:8002/mcp"
  }
}
```

**ç‰¹ç‚¹**ï¼š
- âœ… æ ‡å‡† HTTP - æ˜“äºé›†æˆ
- âœ… è´Ÿè½½å‡è¡¡ - æ”¯æŒé«˜å¯ç”¨
- âœ… ä¼ä¸šçº§ - å®Œå–„çš„å®‰å…¨æœºåˆ¶

### å·¥å…·æ³¨å†Œä¸è°ƒç”¨æµç¨‹

è®©æˆ‘ä»¬é€šè¿‡ä¸€ä¸ªå®ä¾‹ç†è§£å®Œæ•´æµç¨‹ï¼š

```python
# åœºæ™¯ï¼šä½¿ç”¨æ—¶é—´å·¥å…·è·å–å½“å‰æ—¶é—´

# Step 1: VCP å¯åŠ¨ï¼ŒMCPO æ’ä»¶åˆå§‹åŒ–
MCPO Plugin Initialize
    â†“
è¯»å– mcp-config.json
    â†“
å‘ç° time server é…ç½®
    â†“
å¯åŠ¨ time server è¿›ç¨‹ (Stdio)

# Step 2: å·¥å…·å‘ç°
MCPO â†’ time server: "list_tools()"
time server â†’ MCPO: {
    "tools": [
        {
            "name": "get_current_time",
            "description": "è·å–æŒ‡å®šæ—¶åŒºçš„å½“å‰æ—¶é—´",
            "parameters": {
                "timezone": {
                    "type": "string",
                    "description": "IANAæ—¶åŒºåç§°",
                    "required": true
                }
            }
        }
    ]
}

# Step 3: AI è°ƒç”¨å·¥å…·
AI (é€šè¿‡ VCP) â†’ MCPO: "call_tool('time_get_current_time', {'timezone': 'Asia/Shanghai'})"
    â†“
MCPO â†’ time server: "get_current_time({'timezone': 'Asia/Shanghai'})"
    â†“
time server: [æ‰§è¡Œè·å–æ—¶é—´é€»è¾‘]
    â†“
time server â†’ MCPO: {"time": "2025-10-03 14:30:00", "timezone": "Asia/Shanghai"}
    â†“
MCPO â†’ AI: {"success": true, "result": {...}}
    â†“
AI: "å½“å‰ä¸Šæµ·æ—¶é—´æ˜¯ 2025å¹´10æœˆ3æ—¥ 14:30:00"
```

---

## ğŸ¤” é—®é¢˜ä¸‰ï¼šMCPO åœ¨ VCP ä¸­æ‰®æ¼”ä»€ä¹ˆè§’è‰²ï¼Ÿ

### æ¡¥æ¥å™¨å®šä½

MCPO çš„å…¨ç§°æ˜¯ **MCP Orchestrator (MCP ç¼–æ’å™¨)**ï¼Œå®ƒåœ¨ VCP ç³»ç»Ÿä¸­æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„æ’ä»¶ï¼š

```
VCP ç³»ç»Ÿæ¶æ„ï¼š

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           VCP Core System             â”‚
â”‚   (ä¸»æœåŠ¡å™¨ã€Agent ç®¡ç†ã€æ’ä»¶æ¡†æ¶)    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                 â”‚
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚                         â”‚
â”Œâ”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ VCP åŸç”Ÿæ’ä»¶ â”‚      â”‚   MCPO æ’ä»¶      â”‚
â”‚ (AgentMsgç­‰) â”‚      â”‚   (MCP æ¡¥æ¥)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                               â”‚
            â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
            â”‚                  â”‚                  â”‚
       â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
       â”‚ Time    â”‚      â”‚  Context7  â”‚      â”‚ Memory  â”‚
       â”‚ Server  â”‚      â”‚  Server    â”‚      â”‚ Server  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         (MCP)             (MCP)               (MCP)
```

### è‡ªåŠ¨åŒ–å·¥å…·ç®¡ç†

MCPO ä¸º VCP æä¾›äº†å¼ºå¤§çš„å·¥å…·ç®¡ç†èƒ½åŠ›ï¼š

**1. è‡ªåŠ¨å‘ç° (Auto Discovery)**
```python
# ä¼ ç»Ÿæ–¹å¼ï¼šæ‰‹åŠ¨æ³¨å†Œæ¯ä¸ªå·¥å…·
register_tool("get_time", time_handler)
register_tool("search_web", search_handler)
register_tool("read_file", file_handler)
# ... 100 ä¸ªå·¥å…· = 100 è¡Œä»£ç 

# MCPO æ–¹å¼ï¼šè‡ªåŠ¨å‘ç°
# åªéœ€é…ç½® mcp-config.json
# MCPO è‡ªåŠ¨æ‰«ææ‰€æœ‰å·¥å…·
# 0 è¡Œä»£ç ï¼
```

**2. ç»Ÿä¸€è°ƒç”¨æ¥å£**
```python
# VCP AI åªéœ€è¦è®°ä½ä¸€ä¸ªæ ¼å¼
<<<[TOOL_REQUEST]>>>
tool_name:ã€Œå§‹ã€MCPOã€Œæœ«ã€,
action:ã€Œå§‹ã€call_toolã€Œæœ«ã€,
tool_name_param:ã€Œå§‹ã€ä»»æ„_MCP_å·¥å…·ã€Œæœ«ã€,
arguments:ã€Œå§‹ã€{...}ã€Œæœ«ã€
<<<[END_TOOL_REQUEST]>>>
```

**3. çƒ­é‡è½½ (Hot Reload)**
```bash
# ä¿®æ”¹ mcp-config.json æ·»åŠ æ–°å·¥å…·
{
  "new_tool": {
    "command": "python",
    "args": ["-m", "new_mcp_server"]
  }
}

# MCPO è‡ªåŠ¨æ£€æµ‹å¹¶é‡æ–°åŠ è½½
# æ— éœ€é‡å¯ VCPï¼
```

**4. å¤šé…ç½®ç®¡ç†**
```bash
# å¼€å‘ç¯å¢ƒ
MCPO_CONFIG_NAME=dev

# ç”Ÿäº§ç¯å¢ƒ
MCPO_CONFIG_NAME=production

# æµ‹è¯•ç¯å¢ƒ
MCPO_CONFIG_NAME=test

# ä¸€é”®åˆ‡æ¢ï¼Œäº’ä¸å¹²æ‰°
```

### VCP æ’ä»¶ç”Ÿæ€çš„è¡¥å……

MCPO ä¸æ˜¯æ›¿ä»£ VCP åŸç”Ÿæ’ä»¶ï¼Œè€Œæ˜¯äº’è¡¥ï¼š

| åœºæ™¯ | æ¨èæ–¹æ¡ˆ | åŸå›  |
|-----|---------|------|
| **VCP æ ¸å¿ƒåŠŸèƒ½** | VCP åŸç”Ÿæ’ä»¶ | æ·±åº¦é›†æˆã€æ€§èƒ½æœ€ä¼˜ |
| **é€šç”¨å·¥å…·éœ€æ±‚** | MCPO + MCP å·¥å…· | ç”Ÿæ€ä¸°å¯Œã€å³æ’å³ç”¨ |
| **è‡ªå®šä¹‰ä¸šåŠ¡é€»è¾‘** | VCP åŸç”Ÿæ’ä»¶ | çµæ´»å®šåˆ¶ã€æ— é™åˆ¶ |
| **ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆ** | MCPO + MCP å·¥å…· | æ ‡å‡†æ¥å£ã€æ˜“äºç»´æŠ¤ |

**æœ€ä½³å®è·µ**ï¼š
- AgentAssistantã€AgentMessage ç­‰æ ¸å¿ƒåŠŸèƒ½ â†’ VCP åŸç”Ÿæ’ä»¶
- æ—¶é—´ã€æœç´¢ã€æ–‡ä»¶ã€æ•°æ®åº“ç­‰é€šç”¨å·¥å…· â†’ MCPO
- ä¼ä¸šå†…éƒ¨ç‰¹æ®Šéœ€æ±‚ â†’ VCP åŸç”Ÿæ’ä»¶æˆ–è‡ªå®šä¹‰ MCP æœåŠ¡å™¨

---

# ç¬¬äºŒç« ï¼šå¿«é€Ÿä¸Šæ‰‹

## ğŸ¤” é—®é¢˜å››ï¼šå¦‚ä½•å®‰è£… MCPO æ’ä»¶ï¼Ÿ

### å‰ç½®ä¾èµ–æ£€æŸ¥

åœ¨å¼€å§‹ä¹‹å‰ï¼Œç¡®è®¤ä»¥ä¸‹ç¯å¢ƒå·²å‡†å¤‡ï¼š

**1. Python ç¯å¢ƒ**
```bash
python --version
# éœ€è¦: Python 3.8+

# å¦‚æœæ²¡æœ‰ï¼Œè¯·å®‰è£…ï¼š
# Windows: https://www.python.org/downloads/
# Linux: sudo apt install python3 python3-pip
# macOS: brew install python3
```

**2. å®‰è£… mcpo åŒ…**
```bash
pip install mcpo

# éªŒè¯å®‰è£…
mcpo --version
# è¾“å‡º: mcpo version x.x.x
```

**3. å®‰è£…ç¤ºä¾‹ MCP æœåŠ¡å™¨**
```bash
# å®‰è£…æ—¶é—´æœåŠ¡å™¨ï¼ˆæœ€ç®€å•çš„ç¤ºä¾‹ï¼‰
pip install mcp-server-time

# æˆ–ä½¿ç”¨ uvx æ–¹å¼ï¼ˆæ¨èï¼‰
# uvx è‡ªåŠ¨ç®¡ç†ä¾èµ–ï¼Œæ— éœ€å…¨å±€å®‰è£…
pip install uvx
```

### é…ç½® MCPO æ’ä»¶

MCPO æ’ä»¶å·²ç»åŒ…å«åœ¨ VCP ç³»ç»Ÿä¸­ï¼Œä½äºï¼š
```
D:\vcp\VCPToolBox-main\Plugin\MCPO\
```

**Step 1: æŸ¥çœ‹é…ç½®æ–‡ä»¶**

æ‰“å¼€ `Plugin/MCPO/config.env`ï¼š
```env
# MCPO æœåŠ¡å™¨è®¾ç½®
MCPO_PORT=9000                  # MCPO æœåŠ¡å™¨ç«¯å£
MCPO_API_KEY=vcp-mcpo-secret    # API å¯†é’¥
MCPO_AUTO_START=true            # è‡ªåŠ¨å¯åŠ¨æœåŠ¡å™¨

# Python è§£é‡Šå™¨
PYTHON_EXECUTABLE=python        # Python å‘½ä»¤

# MCP é…ç½®æ–‡ä»¶è·¯å¾„
MCP_CONFIG_PATH=./mcp-config.json  # é…ç½®æ–‡ä»¶ä½ç½®

# å¯ç”¨çƒ­é‡è½½
MCPO_HOT_RELOAD=true            # é…ç½®æ–‡ä»¶å˜åŒ–è‡ªåŠ¨é‡è½½
```

**é‡è¦æç¤º**ï¼š
- `MCPO_PORT`: å¦‚æœ 9000 ç«¯å£è¢«å ç”¨ï¼Œå¯ä¿®æ”¹ä¸ºå…¶ä»–ç«¯å£
- `PYTHON_EXECUTABLE`: Windows å¯èƒ½éœ€è¦æ”¹ä¸º `python3` æˆ–å®Œæ•´è·¯å¾„
- `MCPO_AUTO_START`: å»ºè®®ä¿æŒ `true`ï¼ŒVCP å¯åŠ¨æ—¶è‡ªåŠ¨å¯åŠ¨ MCPO

**Step 2: é…ç½® MCP å·¥å…·**

ç¼–è¾‘é¡¹ç›®æ ¹ç›®å½•çš„ `mcp-config.json`ï¼š
```json
{
  "mcpServers": {
    "time": {
      "command": "uvx",
      "args": ["mcp-server-time", "--local-timezone=Asia/Shanghai"]
    }
  }
}
```

**é…ç½®è¯´æ˜**ï¼š
- `time`: æœåŠ¡å™¨åç§°ï¼ˆè‡ªå®šä¹‰ï¼Œä½†è¦å”¯ä¸€ï¼‰
- `command`: å¯åŠ¨å‘½ä»¤
- `args`: å‘½ä»¤å‚æ•°

### é¦–æ¬¡å¯åŠ¨éªŒè¯

**Step 1: åœ¨ VCP ç³»ç»Ÿæç¤ºè¯ä¸­å¯ç”¨ MCPO**

ç¡®ä¿ AI çš„ç³»ç»Ÿæç¤ºè¯åŒ…å«ï¼š
```
ç³»ç»Ÿå·¥å…·åˆ—è¡¨ï¼š{{VCPMCPO}}
```

**Step 2: å¯åŠ¨ VCP ç³»ç»Ÿ**
```bash
cd D:\vcp\VCPToolBox-main
node server.js
```

**Step 3: æµ‹è¯• MCPO çŠ¶æ€**

åœ¨ AI å¯¹è¯ä¸­è¾“å…¥ï¼š
```
è¯·æ£€æŸ¥ MCPO æœåŠ¡å™¨çŠ¶æ€
```

**æœŸæœ›è¾“å‡º**ï¼š
```json
{
  "success": true,
  "status": "running",
  "url": "http://localhost:9000",
  "config_file": "D:/vcp/VCPToolBox-main/mcp-config.json",
  "config_exists": true,
  "hot_reload_enabled": true
}
```

**Step 4: åˆ—å‡ºå¯ç”¨å·¥å…·**

```
è¯·åˆ—å‡ºæ‰€æœ‰ MCP å·¥å…·
```

**æœŸæœ›è¾“å‡º**ï¼š
```json
{
  "success": true,
  "tools": {
    "time_get_current_time": {
      "name": "time_get_current_time",
      "server": "time",
      "description": "è·å–æŒ‡å®šæ—¶åŒºçš„å½“å‰æ—¶é—´",
      "parameters": {
        "timezone": {
          "type": "string",
          "description": "IANAæ—¶åŒºåç§°",
          "required": true
        }
      }
    }
  },
  "count": 1
}
```

âœ… **æ­å–œï¼MCPO æ’ä»¶å·²æˆåŠŸå®‰è£…å¹¶è¿è¡Œ** (à¹‘â€¢Ì€ã…‚â€¢Ì)âœ§

---

## ğŸ¤” é—®é¢˜äº”ï¼šå¦‚ä½•ä½¿ç”¨ç¬¬ä¸€ä¸ª MCP å·¥å…·ï¼Ÿ

### æ—¶é—´å·¥å…·ç¤ºä¾‹

è®©æˆ‘ä»¬ä½¿ç”¨åˆšæ‰é…ç½®çš„æ—¶é—´å·¥å…·è·å–å½“å‰æ—¶é—´ã€‚

**Step 1: æŸ¥çœ‹å·¥å…·ä¿¡æ¯**

```
è¯·è·å– time_get_current_time å·¥å…·çš„è¯¦ç»†ä¿¡æ¯
```

**AI ä¼šè°ƒç”¨**ï¼š
```
<<<[TOOL_REQUEST]>>>
tool_name:ã€Œå§‹ã€MCPOã€Œæœ«ã€,
action:ã€Œå§‹ã€get_tool_infoã€Œæœ«ã€,
tool_name_param:ã€Œå§‹ã€time_get_current_timeã€Œæœ«ã€
<<<[END_TOOL_REQUEST]>>>
```

**è¿”å›**ï¼š
```json
{
  "success": true,
  "tool_info": {
    "name": "time_get_current_time",
    "server": "time",
    "description": "è·å–æŒ‡å®šæ—¶åŒºçš„å½“å‰æ—¶é—´",
    "parameters": {
      "timezone": {
        "type": "string",
        "description": "IANA æ—¶åŒºåç§°ï¼Œä¾‹å¦‚: Asia/Shanghai, America/New_York",
        "required": true,
        "example": "Asia/Shanghai"
      }
    }
  }
}
```

**Step 2: è°ƒç”¨å·¥å…·**

```
è¯·ä½¿ç”¨æ—¶é—´å·¥å…·è·å–ä¸Šæµ·çš„å½“å‰æ—¶é—´
```

**AI ä¼šè°ƒç”¨**ï¼š
```
<<<[TOOL_REQUEST]>>>
tool_name:ã€Œå§‹ã€MCPOã€Œæœ«ã€,
action:ã€Œå§‹ã€call_toolã€Œæœ«ã€,
tool_name_param:ã€Œå§‹ã€time_get_current_timeã€Œæœ«ã€,
arguments:ã€Œå§‹ã€{"timezone": "Asia/Shanghai"}ã€Œæœ«ã€
<<<[END_TOOL_REQUEST]>>>
```

**è¿”å›**ï¼š
```json
{
  "success": true,
  "tool_name": "time_get_current_time",
  "result": {
    "datetime": "2025-10-03T14:30:00+08:00",
    "timezone": "Asia/Shanghai",
    "formatted": "2025å¹´10æœˆ03æ—¥ 14:30:00"
  }
}
```

**AI çš„å‹å¥½å›å¤**ï¼š
```
å½“å‰ä¸Šæµ·æ—¶é—´æ˜¯ï¼š2025å¹´10æœˆ03æ—¥ 14:30:00
```

### è°ƒç”¨æ ¼å¼è¯¦è§£

æ‰€æœ‰ MCPO å·¥å…·è°ƒç”¨éƒ½éµå¾ªç»Ÿä¸€æ ¼å¼ï¼š

```
<<<[TOOL_REQUEST]>>>
tool_name:ã€Œå§‹ã€MCPOã€Œæœ«ã€,                    # å›ºå®šï¼šæ’ä»¶åç§°
action:ã€Œå§‹ã€call_toolã€Œæœ«ã€,                  # å›ºå®šï¼šè°ƒç”¨å·¥å…·åŠ¨ä½œ
tool_name_param:ã€Œå§‹ã€æœåŠ¡å™¨å_å·¥å…·åã€Œæœ«ã€,   # å˜é‡ï¼šå…·ä½“å·¥å…·
arguments:ã€Œå§‹ã€{JSON æ ¼å¼å‚æ•°}ã€Œæœ«ã€         # å˜é‡ï¼šå·¥å…·å‚æ•°
<<<[END_TOOL_REQUEST]>>>
```

**å…³é”®ç‚¹**ï¼š
1. **tool_name_param æ ¼å¼**ï¼š`æœåŠ¡å™¨å_å·¥å…·å`
   - ä¾‹å¦‚ï¼š`time_get_current_time`
   - `time` æ˜¯æœåŠ¡å™¨åï¼ˆmcp-config.json ä¸­é…ç½®çš„é”®ï¼‰
   - `get_current_time` æ˜¯å·¥å…·åï¼ˆMCP æœåŠ¡å™¨æ³¨å†Œçš„å·¥å…·ï¼‰

2. **arguments å¿…é¡»æ˜¯æœ‰æ•ˆ JSON**
   ```json
   # âœ“ æ­£ç¡®
   {"timezone": "Asia/Shanghai"}

   # âœ— é”™è¯¯ï¼ˆç¼ºå°‘å¼•å·ï¼‰
   {timezone: Asia/Shanghai}
   ```

3. **å‚æ•°ç±»å‹è¦åŒ¹é…**
   ```json
   # string ç±»å‹
   {"timezone": "Asia/Shanghai"}

   # integer ç±»å‹
   {"count": 10}

   # boolean ç±»å‹
   {"recursive": true}

   # array ç±»å‹
   {"tags": ["important", "urgent"]}
   ```

### ç»“æœè§£æ

MCPO å·¥å…·è°ƒç”¨è¿”å›ç»Ÿä¸€æ ¼å¼ï¼š

```json
{
  "success": true | false,        // è°ƒç”¨æ˜¯å¦æˆåŠŸ
  "tool_name": "å·¥å…·åç§°",         // è¢«è°ƒç”¨çš„å·¥å…·
  "endpoint": "/server/tool",     // å®é™…è°ƒç”¨çš„ç«¯ç‚¹
  "result": {                     // å·¥å…·è¿”å›çš„ç»“æœ
    // å…·ä½“å†…å®¹ç”±å·¥å…·å†³å®š
  },
  "error": "é”™è¯¯ä¿¡æ¯"              // ä»…åœ¨ success=false æ—¶å­˜åœ¨
}
```

**æˆåŠŸæ¡ˆä¾‹**ï¼š
```json
{
  "success": true,
  "tool_name": "time_get_current_time",
  "result": {
    "datetime": "2025-10-03T14:30:00+08:00",
    "timezone": "Asia/Shanghai"
  }
}
```

**å¤±è´¥æ¡ˆä¾‹**ï¼š
```json
{
  "success": false,
  "tool_name": "time_get_current_time",
  "error": "Invalid timezone: Invalid/Timezone"
}
```

---

## ğŸ¤” é—®é¢˜å…­ï¼šå¦‚ä½•æ·»åŠ æ–°çš„ MCP å·¥å…·ï¼Ÿ

### é…ç½® mcp-config.json

è®©æˆ‘ä»¬æ·»åŠ æ›´å¤šå®ç”¨å·¥å…·ã€‚

**ç¤ºä¾‹ï¼šæ·»åŠ  Context7 æ–‡æ¡£æ£€ç´¢å·¥å…·**

**Step 1: å®‰è£… MCP æœåŠ¡å™¨**
```bash
# Context7 æä¾›ç¼–ç¨‹åº“æ–‡æ¡£æ£€ç´¢
pip install mcp-server-context7
```

**Step 2: ç¼–è¾‘ mcp-config.json**
```json
{
  "mcpServers": {
    "time": {
      "command": "uvx",
      "args": ["mcp-server-time", "--local-timezone=Asia/Shanghai"]
    },
    "context7": {
      "command": "python",
      "args": ["-m", "mcp_server_context7"]
    }
  }
}
```

**Step 3: é‡æ–°åŠ è½½é…ç½®**

å¦‚æœ `MCPO_HOT_RELOAD=true`ï¼ˆé»˜è®¤ï¼‰ï¼Œé…ç½®ä¼šè‡ªåŠ¨é‡è½½ã€‚

æˆ–è€…æ‰‹åŠ¨é‡å¯ï¼š
```
è¯·é‡å¯ MCPO æœåŠ¡å™¨
```

**AI ä¼šè°ƒç”¨**ï¼š
```
<<<[TOOL_REQUEST]>>>
tool_name:ã€Œå§‹ã€MCPOã€Œæœ«ã€,
action:ã€Œå§‹ã€manage_serverã€Œæœ«ã€,
operation:ã€Œå§‹ã€restartã€Œæœ«ã€
<<<[END_TOOL_REQUEST]>>>
```

**Step 4: éªŒè¯æ–°å·¥å…·**
```
è¯·åˆ—å‡ºæ‰€æœ‰ MCP å·¥å…·
```

ç°åœ¨åº”è¯¥çœ‹åˆ°æ–°å¢çš„å·¥å…·ï¼š
```json
{
  "success": true,
  "tools": {
    "time_get_current_time": {...},
    "context7_resolve-library-id": {...},
    "context7_get-library-docs": {...}
  },
  "count": 3
}
```

### å¸¸ç”¨ MCP æœåŠ¡å™¨æ¨è

ä»¥ä¸‹æ˜¯ä¸€äº›å®ç”¨çš„å¼€æº MCP æœåŠ¡å™¨ï¼š

#### 1. **æ–‡ä»¶ç³»ç»Ÿå·¥å…·**
```bash
pip install mcp-server-filesystem
```

```json
{
  "filesystem": {
    "command": "python",
    "args": ["-m", "mcp_server_filesystem"],
    "env": {
      "ALLOWED_DIRECTORIES": "/path/to/allowed/dir"
    }
  }
}
```

**æä¾›å·¥å…·**ï¼š
- `filesystem_read_file`: è¯»å–æ–‡ä»¶
- `filesystem_write_file`: å†™å…¥æ–‡ä»¶
- `filesystem_list_directory`: åˆ—å‡ºç›®å½•
- `filesystem_search_files`: æœç´¢æ–‡ä»¶

#### 2. **å†…å­˜ç³»ç»Ÿå·¥å…·**
```bash
npm install @modelcontextprotocol/server-memory
```

```json
{
  "memory": {
    "command": "npx",
    "args": ["-y", "@modelcontextprotocol/server-memory"]
  }
}
```

**æä¾›å·¥å…·**ï¼š
- `memory_create_entities`: åˆ›å»ºçŸ¥è¯†å®ä½“
- `memory_create_relations`: åˆ›å»ºå®ä½“å…³ç³»
- `memory_search`: æœç´¢çŸ¥è¯†å›¾è°±

#### 3. **ç½‘ç»œæœç´¢å·¥å…·**
```bash
pip install mcp-server-brave-search
```

```json
{
  "brave_search": {
    "command": "python",
    "args": ["-m", "mcp_server_brave_search"],
    "env": {
      "BRAVE_API_KEY": "your-api-key"
    }
  }
}
```

**æä¾›å·¥å…·**ï¼š
- `brave_search_web_search`: ç½‘ç»œæœç´¢
- `brave_search_local_search`: æœ¬åœ°æœç´¢

### å·¥å…·å‘ç°ä¸éªŒè¯

æ¯æ¬¡æ·»åŠ æ–°å·¥å…·åï¼Œå»ºè®®æ‰§è¡Œå®Œæ•´éªŒè¯æµç¨‹ï¼š

**1. æ£€æŸ¥æœåŠ¡å™¨çŠ¶æ€**
```
è¯·æ£€æŸ¥ MCPO æœåŠ¡å™¨çŠ¶æ€
```

**2. é‡æ–°å‘ç°å·¥å…·**ï¼ˆå¦‚æœè‡ªåŠ¨é‡è½½æœªç”Ÿæ•ˆï¼‰
```
è¯·é‡æ–°å‘ç°æ‰€æœ‰ MCP å·¥å…·
```

**3. åˆ—å‡ºå·¥å…·æ¸…å•**
```
è¯·åˆ—å‡ºæ‰€æœ‰ MCP å·¥å…·
```

**4. æŸ¥çœ‹ç‰¹å®šå·¥å…·ä¿¡æ¯**
```
è¯·è·å– context7_get-library-docs å·¥å…·çš„è¯¦ç»†ä¿¡æ¯
```

**5. æµ‹è¯•å·¥å…·è°ƒç”¨**
```
è¯·ä½¿ç”¨ context7 æœç´¢ React æ–‡æ¡£
```

---

# ç¬¬ä¸‰ç« ï¼šé«˜çº§åº”ç”¨

## ğŸ¤” é—®é¢˜ä¸ƒï¼šå¦‚ä½•ç®¡ç†å¤šä¸ªé…ç½®åœºæ™¯ï¼Ÿ

### å¤šé…ç½®æ–‡ä»¶ç»„ç»‡

åœ¨å®é™…ä½¿ç”¨ä¸­ï¼Œä½ å¯èƒ½éœ€è¦ä¸åŒçš„å·¥å…·ç»„åˆï¼š
- **å¼€å‘ç¯å¢ƒ**ï¼šæœ¬åœ°å·¥å…· + æµ‹è¯• API
- **ç”Ÿäº§ç¯å¢ƒ**ï¼šç”Ÿäº§ API + ä¼ä¸šå·¥å…·
- **ä¸ªäººä½¿ç”¨**ï¼šç®€åŒ–å·¥å…·é›†

MCPO æ”¯æŒå¤šé…ç½®æ–‡ä»¶ç®¡ç†ï¼š

**æ–‡ä»¶ç»“æ„**ï¼š
```
VCPToolBox-main/
â”œâ”€â”€ mcp-config.json                # é»˜è®¤é…ç½®
â”œâ”€â”€ Plugin/MCPO/
â”‚   â”œâ”€â”€ dev-config.json            # å¼€å‘ç¯å¢ƒé…ç½®
â”‚   â”œâ”€â”€ prod-config.json           # ç”Ÿäº§ç¯å¢ƒé…ç½®
â”‚   â””â”€â”€ custom-mcp-config/         # è‡ªå®šä¹‰é…ç½®ç›®å½•
â”‚       â”œâ”€â”€ personal-config.json
â”‚       â””â”€â”€ enterprise-config.json
```

### é…ç½®ç¤ºä¾‹

**é»˜è®¤é…ç½® (mcp-config.json)**ï¼š
```json
{
  "mcpServers": {
    "time": {
      "command": "uvx",
      "args": ["mcp-server-time"]
    }
  }
}
```

**å¼€å‘é…ç½® (Plugin/MCPO/dev-config.json)**ï¼š
```json
{
  "mcpServers": {
    "time": {
      "command": "uvx",
      "args": ["mcp-server-time"]
    },
    "filesystem": {
      "command": "python",
      "args": ["-m", "mcp_server_filesystem"],
      "env": {
        "ALLOWED_DIRECTORIES": "/home/dev/projects"
      }
    },
    "memory": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-memory"]
    }
  }
}
```

**ç”Ÿäº§é…ç½® (Plugin/MCPO/prod-config.json)**ï¼š
```json
{
  "mcpServers": {
    "time": {
      "command": "uvx",
      "args": ["mcp-server-time", "--local-timezone=Asia/Shanghai"]
    },
    "context7": {
      "command": "python",
      "args": ["-m", "mcp_server_context7"]
    },
    "enterprise_api": {
      "type": "sse",
      "url": "https://api.company.com/mcp/sse",
      "headers": {
        "Authorization": "Bearer ${ENTERPRISE_TOKEN}"
      }
    }
  }
}
```

### é…ç½®çƒ­åˆ‡æ¢æœºåˆ¶

**æ–¹æ³• 1: ç¯å¢ƒå˜é‡åˆ‡æ¢**

ç¼–è¾‘ `Plugin/MCPO/config.env`ï¼š
```env
# å¼€å‘ç¯å¢ƒ
MCPO_CONFIG_NAME=dev

# ç”Ÿäº§ç¯å¢ƒ
# MCPO_CONFIG_NAME=prod

# ä½¿ç”¨é»˜è®¤é…ç½®
# MCPO_CONFIG_NAME=
```

é‡å¯ VCP ç³»ç»Ÿï¼š
```bash
node server.js
```

**æ–¹æ³• 2: å‘½ä»¤è¡Œåˆ‡æ¢**

```bash
# ä½¿ç”¨å¼€å‘é…ç½®å¯åŠ¨
MCPO_CONFIG_NAME=dev node server.js

# ä½¿ç”¨ç”Ÿäº§é…ç½®å¯åŠ¨
MCPO_CONFIG_NAME=prod node server.js
```

**æ–¹æ³• 3: è¿è¡Œæ—¶æŸ¥çœ‹å¯ç”¨é…ç½®**

```
è¯·åˆ—å‡ºæ‰€æœ‰å¯ç”¨çš„ MCP é…ç½®æ–‡ä»¶
```

**AI ä¼šè°ƒç”¨**ï¼š
```
<<<[TOOL_REQUEST]>>>
tool_name:ã€Œå§‹ã€MCPOã€Œæœ«ã€,
action:ã€Œå§‹ã€list_configsã€Œæœ«ã€
<<<[END_TOOL_REQUEST]>>>
```

**è¿”å›**ï¼š
```json
{
  "success": true,
  "configs": [
    {
      "name": "mcp-config.json (é»˜è®¤)",
      "path": "/path/to/mcp-config.json",
      "type": "root_default",
      "current": false
    },
    {
      "name": "dev-config.json (æ’ä»¶ç›®å½•)",
      "path": "/path/to/Plugin/MCPO/dev-config.json",
      "type": "plugin_custom",
      "config_name": "dev",
      "current": true
    },
    {
      "name": "prod-config.json (æ’ä»¶ç›®å½•)",
      "path": "/path/to/Plugin/MCPO/prod-config.json",
      "type": "plugin_custom",
      "config_name": "prod",
      "current": false
    }
  ],
  "current_config": "/path/to/Plugin/MCPO/dev-config.json",
  "hot_reload_enabled": true
}
```

### æœ€ä½³å®è·µ

**1. é…ç½®æ–‡ä»¶å‘½åè§„èŒƒ**
```
# æ¨èå‘½å
dev-config.json           # å¼€å‘ç¯å¢ƒ
prod-config.json          # ç”Ÿäº§ç¯å¢ƒ
personal-config.json      # ä¸ªäººé…ç½®
team-config.json          # å›¢é˜Ÿé…ç½®

# ä½¿ç”¨æ—¶è®¾ç½®
MCPO_CONFIG_NAME=dev      # è‡ªåŠ¨æŸ¥æ‰¾ dev-config.json
```

**2. ç¯å¢ƒå˜é‡ç®¡ç†**
```env
# åœ¨é…ç½®æ–‡ä»¶ä¸­ä½¿ç”¨ç¯å¢ƒå˜é‡
{
  "api_server": {
    "env": {
      "API_KEY": "${MY_API_KEY}",
      "API_URL": "${MY_API_URL}"
    }
  }
}

# åœ¨ç³»ç»Ÿç¯å¢ƒå˜é‡æˆ– .env ä¸­è®¾ç½®
MY_API_KEY=your_secret_key
MY_API_URL=https://api.example.com
```

**3. é…ç½®æ–‡ä»¶ç‰ˆæœ¬æ§åˆ¶**
```bash
# .gitignore
mcp-config.json          # ä¸ªäººé…ç½®ä¸æäº¤
*-config.json            # æ‰€æœ‰é…ç½®æ–‡ä»¶ä¸æäº¤

# ä½†ä¿ç•™ç¤ºä¾‹é…ç½®
!example-config.json     # ç¤ºä¾‹é…ç½®æäº¤åˆ°ä»“åº“
```

**4. é…ç½®éªŒè¯æµç¨‹**
```bash
# åˆ‡æ¢é…ç½®åçš„éªŒè¯æ­¥éª¤
1. æ£€æŸ¥ MCPO çŠ¶æ€
2. åˆ—å‡ºå·¥å…·æ¸…å•
3. æµ‹è¯•å…³é”®å·¥å…·
4. æŸ¥çœ‹æ—¥å¿—æ’æŸ¥é—®é¢˜
```

---

## ğŸ¤” é—®é¢˜å…«ï¼šå¦‚ä½•æ„å»ºè‡ªå·±çš„ MCP å·¥å…·ï¼Ÿ

### MCP æœåŠ¡å™¨å¼€å‘åŸºç¡€

å¦‚æœç°æœ‰çš„ MCP å·¥å…·æ— æ³•æ»¡è¶³éœ€æ±‚ï¼Œä½ å¯ä»¥å¼€å‘è‡ªå·±çš„ MCP æœåŠ¡å™¨ã€‚

**é€‰æ‹©å¼€å‘è¯­è¨€**ï¼š
- **Python** - æ¨èï¼Œç”Ÿæ€ä¸°å¯Œ
- **TypeScript/JavaScript** - Web å¼€å‘å‹å¥½
- **å…¶ä»–è¯­è¨€** - éœ€è‡ªè¡Œå®ç° MCP åè®®

### Python MCP æœåŠ¡å™¨ç¤ºä¾‹

**Step 1: å®‰è£… MCP SDK**
```bash
pip install mcp
```

**Step 2: åˆ›å»ºæœåŠ¡å™¨æ–‡ä»¶ `my_custom_server.py`**
```python
#!/usr/bin/env python3
"""
è‡ªå®šä¹‰ MCP æœåŠ¡å™¨ç¤ºä¾‹
åŠŸèƒ½ï¼šæä¾›å¤©æ°”æŸ¥è¯¢å·¥å…·
"""

from mcp.server import Server
from mcp.types import Tool, TextContent
import json

# åˆ›å»ºæœåŠ¡å™¨å®ä¾‹
server = Server("my_custom_weather_server")

# æ³¨å†Œå·¥å…·
@server.list_tools()
async def list_tools() -> list[Tool]:
    """åˆ—å‡ºæ‰€æœ‰å¯ç”¨å·¥å…·"""
    return [
        Tool(
            name="get_weather",
            description="è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯",
            inputSchema={
                "type": "object",
                "properties": {
                    "city": {
                        "type": "string",
                        "description": "åŸå¸‚åç§°ï¼Œä¾‹å¦‚ï¼šåŒ—äº¬ã€ä¸Šæµ·"
                    },
                    "date": {
                        "type": "string",
                        "description": "æ—¥æœŸï¼Œæ ¼å¼ï¼šYYYY-MM-DDï¼Œä¸å¡«åˆ™ä¸ºä»Šå¤©",
                        "default": None
                    }
                },
                "required": ["city"]
            }
        )
    ]

# å®ç°å·¥å…·é€»è¾‘
@server.call_tool()
async def call_tool(name: str, arguments: dict) -> list[TextContent]:
    """å¤„ç†å·¥å…·è°ƒç”¨"""

    if name == "get_weather":
        city = arguments.get("city")
        date = arguments.get("date", "ä»Šå¤©")

        # è¿™é‡Œæ˜¯ç¤ºä¾‹ï¼Œå®é™…åº”è°ƒç”¨å¤©æ°” API
        weather_data = {
            "city": city,
            "date": date,
            "temperature": "25Â°C",
            "condition": "æ™´å¤©",
            "humidity": "60%",
            "wind": "ä¸œé£ 3çº§"
        }

        result_text = f"""
{city} {date}çš„å¤©æ°”ï¼š
- æ¸©åº¦ï¼š{weather_data['temperature']}
- å¤©æ°”ï¼š{weather_data['condition']}
- æ¹¿åº¦ï¼š{weather_data['humidity']}
- é£åŠ›ï¼š{weather_data['wind']}
"""

        return [TextContent(
            type="text",
            text=result_text
        )]

    raise ValueError(f"Unknown tool: {name}")

# å¯åŠ¨æœåŠ¡å™¨
if __name__ == "__main__":
    import asyncio
    import mcp.server.stdio

    asyncio.run(mcp.server.stdio.stdio_server(server))
```

**Step 3: æµ‹è¯•æœåŠ¡å™¨**
```bash
python my_custom_server.py

# æœåŠ¡å™¨ä¼šç›‘å¬æ ‡å‡†è¾“å…¥/è¾“å‡º
# å‘é€ MCP åè®®æ¶ˆæ¯è¿›è¡Œæµ‹è¯•
```

### ä¸ MCPO é›†æˆ

**Step 1: å°†æœåŠ¡å™¨æ–‡ä»¶æ”¾åˆ°åˆé€‚ä½ç½®**
```bash
# æ¨èä½ç½®
mkdir -p ~/.vcp/mcp_servers/
mv my_custom_server.py ~/.vcp/mcp_servers/

# æ·»åŠ æ‰§è¡Œæƒé™
chmod +x ~/.vcp/mcp_servers/my_custom_server.py
```

**Step 2: é…ç½® mcp-config.json**
```json
{
  "mcpServers": {
    "weather": {
      "command": "python",
      "args": ["~/.vcp/mcp_servers/my_custom_server.py"]
    }
  }
}
```

**Step 3: é‡å¯ MCPO å¹¶éªŒè¯**
```
è¯·é‡å¯ MCPO æœåŠ¡å™¨
```

ç„¶åï¼š
```
è¯·åˆ—å‡ºæ‰€æœ‰ MCP å·¥å…·
```

åº”è¯¥çœ‹åˆ°ï¼š
```json
{
  "tools": {
    "weather_get_weather": {
      "name": "weather_get_weather",
      "server": "weather",
      "description": "è·å–æŒ‡å®šåŸå¸‚çš„å¤©æ°”ä¿¡æ¯",
      ...
    }
  }
}
```

**Step 4: è°ƒç”¨è‡ªå®šä¹‰å·¥å…·**
```
è¯·æŸ¥è¯¢åŒ—äº¬ä»Šå¤©çš„å¤©æ°”
```

**AI ä¼šè°ƒç”¨**ï¼š
```
<<<[TOOL_REQUEST]>>>
tool_name:ã€Œå§‹ã€MCPOã€Œæœ«ã€,
action:ã€Œå§‹ã€call_toolã€Œæœ«ã€,
tool_name_param:ã€Œå§‹ã€weather_get_weatherã€Œæœ«ã€,
arguments:ã€Œå§‹ã€{"city": "åŒ—äº¬"}ã€Œæœ«ã€
<<<[END_TOOL_REQUEST]>>>
```

### TypeScript MCP æœåŠ¡å™¨ç¤ºä¾‹

**Step 1: åˆå§‹åŒ–é¡¹ç›®**
```bash
mkdir my-mcp-server
cd my-mcp-server
npm init -y
npm install @modelcontextprotocol/sdk
```

**Step 2: åˆ›å»º `index.ts`**
```typescript
#!/usr/bin/env node
import { Server } from "@modelcontextprotocol/sdk/server/index.js";
import { StdioServerTransport } from "@modelcontextprotocol/sdk/server/stdio.js";
import {
  CallToolRequestSchema,
  ListToolsRequestSchema,
} from "@modelcontextprotocol/sdk/types.js";

// åˆ›å»ºæœåŠ¡å™¨
const server = new Server({
  name: "my-custom-calculator",
  version: "1.0.0",
}, {
  capabilities: {
    tools: {},
  },
});

// æ³¨å†Œå·¥å…·åˆ—è¡¨å¤„ç†å™¨
server.setRequestHandler(ListToolsRequestSchema, async () => {
  return {
    tools: [
      {
        name: "calculate",
        description: "æ‰§è¡Œæ•°å­¦è®¡ç®—",
        inputSchema: {
          type: "object",
          properties: {
            expression: {
              type: "string",
              description: "æ•°å­¦è¡¨è¾¾å¼ï¼Œä¾‹å¦‚ï¼š2 + 2, 10 * 5",
            },
          },
          required: ["expression"],
        },
      },
    ],
  };
});

// æ³¨å†Œå·¥å…·è°ƒç”¨å¤„ç†å™¨
server.setRequestHandler(CallToolRequestSchema, async (request) => {
  if (request.params.name === "calculate") {
    const expression = String(request.params.arguments?.expression);

    try {
      // ç®€å•çš„æ•°å­¦è®¡ç®—ï¼ˆå®é™…åº”ä½¿ç”¨å®‰å…¨çš„è¡¨è¾¾å¼æ±‚å€¼ï¼‰
      const result = eval(expression);

      return {
        content: [
          {
            type: "text",
            text: `è®¡ç®—ç»“æœï¼š${expression} = ${result}`,
          },
        ],
      };
    } catch (error) {
      throw new Error(`è®¡ç®—é”™è¯¯ï¼š${error}`);
    }
  }

  throw new Error(`Unknown tool: ${request.params.name}`);
});

// å¯åŠ¨æœåŠ¡å™¨
async function main() {
  const transport = new StdioServerTransport();
  await server.connect(transport);

  console.error("MCP Calculator Server running on stdio");
}

main().catch((error) => {
  console.error("Server error:", error);
  process.exit(1);
});
```

**Step 3: ç¼–è¯‘å’Œé…ç½®**
```bash
# ç¼–è¯‘
npx tsc

# é…ç½®åˆ° mcp-config.json
{
  "calculator": {
    "command": "node",
    "args": ["/path/to/my-mcp-server/dist/index.js"]
  }
}
```

### å¼€å‘æœ€ä½³å®è·µ

**1. å·¥å…·è®¾è®¡åŸåˆ™**
- âœ… å•ä¸€èŒè´£ - ä¸€ä¸ªå·¥å…·åªåšä¸€ä»¶äº‹
- âœ… æ¸…æ™°å‘½å - å·¥å…·åå’Œå‚æ•°åè¦ç›´è§‚
- âœ… è¯¦ç»†æè¿° - description è¦å‡†ç¡®å®Œæ•´
- âœ… é”™è¯¯å¤„ç† - æä¾›å‹å¥½çš„é”™è¯¯ä¿¡æ¯

**2. å‚æ•°è®¾è®¡**
```json
{
  "inputSchema": {
    "type": "object",
    "properties": {
      "required_param": {
        "type": "string",
        "description": "å¿…éœ€å‚æ•°çš„è¯¦ç»†è¯´æ˜",
        // æä¾›ç¤ºä¾‹
        "examples": ["ç¤ºä¾‹å€¼1", "ç¤ºä¾‹å€¼2"]
      },
      "optional_param": {
        "type": "string",
        "description": "å¯é€‰å‚æ•°çš„è¯¦ç»†è¯´æ˜",
        // æä¾›é»˜è®¤å€¼
        "default": "é»˜è®¤å€¼"
      }
    },
    "required": ["required_param"]
  }
}
```

**3. å®‰å…¨æ€§è€ƒè™‘**
```python
# âŒ å±é™©ï¼šç›´æ¥æ‰§è¡Œç”¨æˆ·è¾“å…¥
result = eval(user_input)

# âœ… å®‰å…¨ï¼šéªŒè¯å’Œé™åˆ¶è¾“å…¥
ALLOWED_OPERATIONS = ['+', '-', '*', '/']
if operation not in ALLOWED_OPERATIONS:
    raise ValueError("Invalid operation")

# âœ… å®‰å…¨ï¼šæ–‡ä»¶è®¿é—®é™åˆ¶
ALLOWED_DIRECTORIES = ["/safe/path"]
if not path.startswith(ALLOWED_DIRECTORIES):
    raise ValueError("Access denied")
```

**4. æ€§èƒ½ä¼˜åŒ–**
```python
# ç¼“å­˜ç»“æœ
from functools import lru_cache

@lru_cache(maxsize=100)
def expensive_operation(param):
    # è€—æ—¶æ“ä½œ
    return result

# å¼‚æ­¥å¤„ç†
import asyncio

async def async_tool_handler(args):
    # å¼‚æ­¥æ“ä½œ
    result = await some_async_api_call(args)
    return result
```

---

## ğŸ¤” é—®é¢˜ä¹ï¼šå¦‚ä½•æ’æŸ¥å’Œä¼˜åŒ–ï¼Ÿ

### å¸¸è§é—®é¢˜è¯Šæ–­

#### é—®é¢˜ 1: MCPO æœåŠ¡å™¨æ— æ³•å¯åŠ¨

**ç—‡çŠ¶**ï¼š
```
è¯·æ£€æŸ¥ MCPO æœåŠ¡å™¨çŠ¶æ€
```
è¿”å›ï¼š
```json
{
  "success": true,
  "status": "stopped"
}
```

**è¯Šæ–­æ­¥éª¤**ï¼š

**1. æ£€æŸ¥ç«¯å£å ç”¨**
```bash
# Windows
netstat -ano | findstr :9000

# Linux/macOS
lsof -i :9000

# å¦‚æœç«¯å£è¢«å ç”¨ï¼Œä¿®æ”¹ config.env
MCPO_PORT=9001
```

**2. æ£€æŸ¥ mcpo æ˜¯å¦å®‰è£…**
```bash
mcpo --version

# å¦‚æœæœªå®‰è£…
pip install mcpo
```

**3. æ£€æŸ¥é…ç½®æ–‡ä»¶**
```bash
# éªŒè¯ JSON æ ¼å¼
cat mcp-config.json | python -m json.tool

# å¦‚æœæœ‰è¯­æ³•é”™è¯¯ï¼Œä¼šæ˜¾ç¤ºé”™è¯¯è¡Œå·
```

**4. æ‰‹åŠ¨å¯åŠ¨æµ‹è¯•**
```bash
# æ‰‹åŠ¨å¯åŠ¨ MCPO
mcpo --config ./mcp-config.json --port 9000 --api-key test

# è§‚å¯Ÿé”™è¯¯è¾“å‡º
```

#### é—®é¢˜ 2: å·¥å…·è°ƒç”¨å¤±è´¥

**ç—‡çŠ¶**ï¼š
```
è¯·ä½¿ç”¨ time å·¥å…·è·å–å½“å‰æ—¶é—´
```
è¿”å›ï¼š
```json
{
  "success": false,
  "error": "Tool 'time_get_current_time' not found"
}
```

**è¯Šæ–­æ­¥éª¤**ï¼š

**1. ç¡®è®¤å·¥å…·æ˜¯å¦æ³¨å†Œ**
```
è¯·åˆ—å‡ºæ‰€æœ‰ MCP å·¥å…·
```

**2. æ£€æŸ¥å·¥å…·åç§°æ ¼å¼**
```
# æ­£ç¡®æ ¼å¼ï¼šæœåŠ¡å™¨å_å·¥å…·å
time_get_current_time

# é”™è¯¯æ ¼å¼
get_current_time  # ç¼ºå°‘æœåŠ¡å™¨å‰ç¼€
time-get_current_time  # é”™è¯¯çš„åˆ†éš”ç¬¦
```

**3. æ£€æŸ¥ MCP æœåŠ¡å™¨çŠ¶æ€**
```bash
# æŸ¥çœ‹ MCPO æ—¥å¿—
curl http://localhost:9000/docs

# æŸ¥çœ‹ç‰¹å®šæœåŠ¡å™¨çŠ¶æ€
curl http://localhost:9000/time/docs
```

**4. æµ‹è¯• MCP æœåŠ¡å™¨**
```bash
# ç›´æ¥æµ‹è¯• MCP æœåŠ¡å™¨
echo '{"jsonrpc":"2.0","method":"tools/list","id":1}' | python -m mcp_server_time
```

#### é—®é¢˜ 3: é…ç½®çƒ­é‡è½½ä¸ç”Ÿæ•ˆ

**ç—‡çŠ¶**ï¼šä¿®æ”¹ `mcp-config.json` åï¼Œå·¥å…·åˆ—è¡¨æœªæ›´æ–°ã€‚

**è§£å†³æ–¹æ¡ˆ**ï¼š

**1. ç¡®è®¤çƒ­é‡è½½å·²å¯ç”¨**
```bash
# æ£€æŸ¥ config.env
MCPO_HOT_RELOAD=true
```

**2. æ‰‹åŠ¨é‡æ–°åŠ è½½**
```
è¯·é‡å¯ MCPO æœåŠ¡å™¨
```

**3. æ¸…ç†ç¼“å­˜**
```bash
# åˆ é™¤å¯èƒ½çš„ç¼“å­˜æ–‡ä»¶
rm -f mcpo.pid
rm -f mcpo_cache.json
```

**4. å¼ºåˆ¶é‡æ–°å‘ç°**
```
è¯·é‡æ–°å‘ç°æ‰€æœ‰ MCP å·¥å…·
```

### æ€§èƒ½ä¼˜åŒ–ç­–ç•¥

#### ä¼˜åŒ– 1: å·¥å…·ç¼“å­˜æœºåˆ¶

MCPO å†…ç½®äº†å·¥å…·ç¼“å­˜ï¼Œä½†å¯ä»¥è¿›ä¸€æ­¥ä¼˜åŒ–ï¼š

```python
# åœ¨è‡ªå®šä¹‰ MCP æœåŠ¡å™¨ä¸­å®ç°ç¼“å­˜
from functools import lru_cache
from datetime import datetime, timedelta

class CachedTool:
    def __init__(self):
        self._cache = {}
        self._cache_duration = timedelta(minutes=5)

    @lru_cache(maxsize=100)
    def get_cached_result(self, key):
        # å®ç°ç¼“å­˜é€»è¾‘
        if key in self._cache:
            cached_time, result = self._cache[key]
            if datetime.now() - cached_time < self._cache_duration:
                return result

        # è·å–æ–°ç»“æœ
        result = self._expensive_operation(key)
        self._cache[key] = (datetime.now(), result)
        return result
```

#### ä¼˜åŒ– 2: å¹¶è¡Œå·¥å…·è°ƒç”¨

å¦‚æœéœ€è¦è°ƒç”¨å¤šä¸ªå·¥å…·ï¼Œå¯ä»¥å¹¶è¡Œæ‰§è¡Œï¼š

```python
# VCP æ’ä»¶ä¸­çš„å¹¶è¡Œè°ƒç”¨ç¤ºä¾‹
import asyncio

async def call_multiple_tools(tools_and_args):
    tasks = []
    for tool_name, arguments in tools_and_args:
        task = call_tool_async(tool_name, arguments)
        tasks.append(task)

    results = await asyncio.gather(*tasks)
    return results

# ä½¿ç”¨ç¤ºä¾‹
tools = [
    ("time_get_current_time", {"timezone": "Asia/Shanghai"}),
    ("weather_get_weather", {"city": "åŒ—äº¬"}),
    ("context7_resolve-library-id", {"libraryName": "React"})
]

results = await call_multiple_tools(tools)
```

#### ä¼˜åŒ– 3: å‡å°‘å·¥å…·å‘ç°é¢‘ç‡

```env
# config.env ä¼˜åŒ–
MCPO_HOT_RELOAD=false  # ç”Ÿäº§ç¯å¢ƒå…³é—­çƒ­é‡è½½

# æˆ–ä½¿ç”¨å›ºå®šçš„å·¥å…·ç¼“å­˜
MCPO_CACHE_TOOLS=true
MCPO_CACHE_DURATION=3600  # ç¼“å­˜1å°æ—¶
```

#### ä¼˜åŒ– 4: æœåŠ¡å™¨è¿›ç¨‹ç®¡ç†

```python
# å®ç°æœåŠ¡å™¨è¿æ¥æ± 
class MCPServerPool:
    def __init__(self, max_connections=5):
        self.pool = []
        self.max_connections = max_connections

    def get_connection(self, server_name):
        # å¤ç”¨å·²æœ‰è¿æ¥
        for conn in self.pool:
            if conn.server == server_name and not conn.in_use:
                conn.in_use = True
                return conn

        # åˆ›å»ºæ–°è¿æ¥
        if len(self.pool) < self.max_connections:
            conn = self._create_connection(server_name)
            self.pool.append(conn)
            return conn

        # ç­‰å¾…å¯ç”¨è¿æ¥
        return self._wait_for_connection(server_name)
```

### ç›‘æ§ä¸æ—¥å¿—

#### æ—¥å¿—é…ç½®

**VCP ç³»ç»Ÿæ—¥å¿—**ï¼š
```
DebugLog/ServerLog-YYYY-MM-DD-HH-MM-SS.txt
```

**MCPO æ’ä»¶æ—¥å¿—**ï¼š
```python
# åœ¨ mcpo_plugin.py ä¸­
import logging

logging.basicConfig(
    level=logging.INFO,
    format='%(asctime)s - %(levelname)s - %(message)s',
    handlers=[
        logging.FileHandler('mcpo_plugin.log'),
        logging.StreamHandler()
    ]
)
```

#### ç›‘æ§æŒ‡æ ‡

**å…³é”®æŒ‡æ ‡**ï¼š
1. **MCPO æœåŠ¡å™¨çŠ¶æ€** - running/stopped
2. **å·¥å…·æ•°é‡** - å¯ç”¨å·¥å…·æ€»æ•°
3. **è°ƒç”¨æˆåŠŸç‡** - æˆåŠŸ/å¤±è´¥æ¯”ä¾‹
4. **å¹³å‡å“åº”æ—¶é—´** - å·¥å…·è°ƒç”¨è€—æ—¶
5. **é”™è¯¯ç‡** - å„ç±»é”™è¯¯çš„é¢‘ç‡

**ç›‘æ§è„šæœ¬ç¤ºä¾‹**ï¼š
```python
#!/usr/bin/env python3
import requests
import time
from datetime import datetime

def monitor_mcpo():
    base_url = "http://localhost:9000"

    while True:
        try:
            # å¥åº·æ£€æŸ¥
            response = requests.get(f"{base_url}/docs")
            status = "running" if response.status_code == 200 else "stopped"

            # è·å–å·¥å…·æ•°é‡
            tools_response = requests.get(
                f"{base_url}/openapi.json",
                headers={"Authorization": "Bearer vcp-mcpo-secret"}
            )
            tools_count = len(tools_response.json().get('paths', {}))

            # è®°å½•æ—¥å¿—
            print(f"[{datetime.now()}] Status: {status}, Tools: {tools_count}")

        except Exception as e:
            print(f"[{datetime.now()}] Error: {e}")

        time.sleep(60)  # æ¯åˆ†é’Ÿæ£€æŸ¥ä¸€æ¬¡

if __name__ == "__main__":
    monitor_mcpo()
```

---

# ç¬¬å››ç« ï¼šå®æˆ˜æ¡ˆä¾‹

## æ¡ˆä¾‹ 1: æ„å»ºæ–‡æ¡£æ£€ç´¢åŠ©æ‰‹

### åœºæ™¯æè¿°

éœ€æ±‚ï¼šè®© AI èƒ½å¤Ÿæ£€ç´¢å’Œå­¦ä¹ ä»»æ„ç¼–ç¨‹åº“çš„æ–‡æ¡£ã€‚

### å®ç°æ­¥éª¤

**Step 1: å®‰è£… Context7 MCP æœåŠ¡å™¨**
```bash
pip install mcp-server-context7
```

**Step 2: é…ç½® mcp-config.json**
```json
{
  "mcpServers": {
    "context7": {
      "command": "python",
      "args": ["-m", "mcp_server_context7"]
    }
  }
}
```

**Step 3: é‡å¯å¹¶éªŒè¯**
```
è¯·é‡å¯ MCPO æœåŠ¡å™¨ï¼Œç„¶ååˆ—å‡ºæ‰€æœ‰å·¥å…·
```

**Step 4: ä½¿ç”¨ç¤ºä¾‹**

**åœºæ™¯ 1ï¼šæŸ¥æ‰¾åº“ ID**
```
æˆ‘æƒ³å­¦ä¹  React Hooksï¼Œè¯·å¸®æˆ‘æ‰¾åˆ° React çš„æ–‡æ¡£åº“
```

**AI ä¼šè°ƒç”¨**ï¼š
```
<<<[TOOL_REQUEST]>>>
tool_name:ã€Œå§‹ã€MCPOã€Œæœ«ã€,
action:ã€Œå§‹ã€call_toolã€Œæœ«ã€,
tool_name_param:ã€Œå§‹ã€context7_resolve-library-idã€Œæœ«ã€,
arguments:ã€Œå§‹ã€{"libraryName": "React"}ã€Œæœ«ã€
<<<[END_TOOL_REQUEST]>>>
```

**è¿”å›**ï¼š
```json
{
  "success": true,
  "result": {
    "library_id": "/facebook/react",
    "name": "React",
    "description": "A JavaScript library for building user interfaces"
  }
}
```

**åœºæ™¯ 2ï¼šè·å–ç‰¹å®šä¸»é¢˜æ–‡æ¡£**
```
è¯·è·å– React Hooks çš„è¯¦ç»†æ–‡æ¡£
```

**AI ä¼šè°ƒç”¨**ï¼š
```
<<<[TOOL_REQUEST]>>>
tool_name:ã€Œå§‹ã€MCPOã€Œæœ«ã€,
action:ã€Œå§‹ã€call_toolã€Œæœ«ã€,
tool_name_param:ã€Œå§‹ã€context7_get-library-docsã€Œæœ«ã€,
arguments:ã€Œå§‹ã€{
  "context7CompatibleLibraryID": "/facebook/react",
  "topic": "hooks",
  "tokens": 5000
}ã€Œæœ«ã€
<<<[END_TOOL_REQUEST]>>>
```

**AI æ•´åˆç»“æœ**ï¼š
```
æ ¹æ® React å®˜æ–¹æ–‡æ¡£ï¼ŒHooks æ˜¯ React 16.8 å¼•å…¥çš„æ–°ç‰¹æ€§...

ä¸»è¦ Hooksï¼š
1. useState - çŠ¶æ€ç®¡ç†
2. useEffect - å‰¯ä½œç”¨å¤„ç†
3. useContext - ä¸Šä¸‹æ–‡è®¿é—®
...

[è¯¦ç»†æ–‡æ¡£å†…å®¹]
```

---

## æ¡ˆä¾‹ 2: å®ç°æ–‡ä»¶ç³»ç»Ÿæ“ä½œ

### åœºæ™¯æè¿°

éœ€æ±‚ï¼šè®© AI èƒ½å¤Ÿè¯»å†™æœ¬åœ°æ–‡ä»¶ï¼Œå®ç°æ—¥å¿—åˆ†æã€é…ç½®ä¿®æ”¹ç­‰åŠŸèƒ½ã€‚

### å®ç°æ­¥éª¤

**Step 1: å®‰è£…æ–‡ä»¶ç³»ç»ŸæœåŠ¡å™¨**
```bash
pip install mcp-server-filesystem
```

**Step 2: é…ç½®å…è®¸çš„ç›®å½•**
```json
{
  "mcpServers": {
    "filesystem": {
      "command": "python",
      "args": ["-m", "mcp_server_filesystem"],
      "env": {
        "ALLOWED_DIRECTORIES": "D:/vcp/VCPToolBox-main/DebugLog,D:/vcp/VCPToolBox-main/Config"
      }
    }
  }
}
```

**å®‰å…¨æç¤º**ï¼š
- âš ï¸ åªå…è®¸ AI è®¿é—®å¿…è¦çš„ç›®å½•
- âš ï¸ é¿å…æˆäºˆæ ¹ç›®å½•è®¿é—®æƒé™
- âš ï¸ å®šæœŸå®¡æŸ¥æ–‡ä»¶æ“ä½œæ—¥å¿—

**Step 3: ä½¿ç”¨ç¤ºä¾‹**

**åœºæ™¯ 1ï¼šè¯»å–æ—¥å¿—æ–‡ä»¶**
```
è¯·è¯»å–æœ€æ–°çš„æœåŠ¡å™¨æ—¥å¿—æ–‡ä»¶
```

**AI å·¥ä½œæµ**ï¼š
1. åˆ—å‡º DebugLog ç›®å½•
2. æ‰¾åˆ°æœ€æ–°çš„æ—¥å¿—æ–‡ä»¶
3. è¯»å–æ–‡ä»¶å†…å®¹
4. åˆ†ææ—¥å¿—

**åœºæ™¯ 2ï¼šä¿®æ”¹é…ç½®æ–‡ä»¶**
```
è¯·å°† config.json ä¸­çš„ port ä» 3000 æ”¹ä¸º 4000
```

**AI å·¥ä½œæµ**ï¼š
1. è¯»å– Config/config.json
2. è§£æ JSON
3. ä¿®æ”¹ port å­—æ®µ
4. å†™å›æ–‡ä»¶

---

## æ¡ˆä¾‹ 3: åˆ›å»ºçŸ¥è¯†è®°å¿†ç³»ç»Ÿ

### åœºæ™¯æè¿°

éœ€æ±‚ï¼šè®© AI èƒ½å¤Ÿè®°ä½ç”¨æˆ·çš„åå¥½ã€å†å²å¯¹è¯ã€é‡è¦ä¿¡æ¯ã€‚

### å®ç°æ­¥éª¤

**Step 1: å®‰è£…å†…å­˜æœåŠ¡å™¨**
```bash
npm install @modelcontextprotocol/server-memory
```

**Step 2: é…ç½® mcp-config.json**
```json
{
  "mcpServers": {
    "memory": {
      "command": "npx",
      "args": ["-y", "@modelcontextprotocol/server-memory"]
    }
  }
}
```

**Step 3: ä½¿ç”¨ç¤ºä¾‹**

**åœºæ™¯ 1ï¼šè®°ä½ç”¨æˆ·åå¥½**
```
æˆ‘å–œæ¬¢ä½¿ç”¨ Python è¿›è¡Œæ•°æ®åˆ†æï¼Œå¸¸ç”¨çš„åº“æ˜¯ pandas å’Œ matplotlib
```

**AI ä¼šè°ƒç”¨**ï¼š
```
<<<[TOOL_REQUEST]>>>
tool_name:ã€Œå§‹ã€MCPOã€Œæœ«ã€,
action:ã€Œå§‹ã€call_toolã€Œæœ«ã€,
tool_name_param:ã€Œå§‹ã€memory_create_entitiesã€Œæœ«ã€,
arguments:ã€Œå§‹ã€{
  "entities": [
    {
      "name": "ç”¨æˆ·ç¼–ç¨‹åå¥½",
      "entityType": "preference",
      "observations": [
        "å–œæ¬¢ä½¿ç”¨ Python",
        "å¸¸ç”¨ pandas è¿›è¡Œæ•°æ®åˆ†æ",
        "å¸¸ç”¨ matplotlib è¿›è¡Œå¯è§†åŒ–"
      ]
    }
  ]
}ã€Œæœ«ã€
<<<[END_TOOL_REQUEST]>>>
```

**åœºæ™¯ 2ï¼šå›å¿†å†å²ä¿¡æ¯**
```
æˆ‘ä¹‹å‰è¯´è¿‡æˆ‘å–œæ¬¢ç”¨ä»€ä¹ˆç¼–ç¨‹è¯­è¨€ï¼Ÿ
```

**AI ä¼šè°ƒç”¨**ï¼š
```
<<<[TOOL_REQUEST]>>>
tool_name:ã€Œå§‹ã€MCPOã€Œæœ«ã€,
action:ã€Œå§‹ã€call_toolã€Œæœ«ã€,
tool_name_param:ã€Œå§‹ã€memory_searchã€Œæœ«ã€,
arguments:ã€Œå§‹ã€{
  "query": "ç¼–ç¨‹è¯­è¨€åå¥½"
}ã€Œæœ«ã€
<<<[END_TOOL_REQUEST]>>>
```

**AI å›å¤**ï¼š
```
æ ¹æ®æˆ‘çš„è®°å¿†ï¼Œä½ ä¹‹å‰è¯´è¿‡å–œæ¬¢ä½¿ç”¨ Pythonï¼Œå¹¶ä¸”å¸¸ç”¨ pandas å’Œ matplotlib åº“ã€‚
```

---

## æ¡ˆä¾‹ 4: é›†æˆå¤–éƒ¨ API æœåŠ¡

### åœºæ™¯æè¿°

éœ€æ±‚ï¼šå°†ä¼ä¸šå†…éƒ¨ API æˆ–ç¬¬ä¸‰æ–¹æœåŠ¡é›†æˆåˆ° VCPã€‚

### å®ç°æ­¥éª¤

**Step 1: åˆ›å»º API æ¡¥æ¥ MCP æœåŠ¡å™¨**

```python
#!/usr/bin/env python3
"""
ä¼ä¸š API æ¡¥æ¥ MCP æœåŠ¡å™¨
"""

from mcp.server import Server
from mcp.types import Tool, TextContent
import requests
import json

server = Server("enterprise_api_bridge")

@server.list_tools()
async def list_tools() -> list[Tool]:
    return [
        Tool(
            name="query_database",
            description="æŸ¥è¯¢ä¼ä¸šæ•°æ®åº“",
            inputSchema={
                "type": "object",
                "properties": {
                    "sql": {
                        "type": "string",
                        "description": "SQL æŸ¥è¯¢è¯­å¥"
                    },
                    "database": {
                        "type": "string",
                        "description": "æ•°æ®åº“åç§°",
                        "default": "main"
                    }
                },
                "required": ["sql"]
            }
        ),
        Tool(
            name="send_notification",
            description="å‘é€ä¼ä¸šé€šçŸ¥",
            inputSchema={
                "type": "object",
                "properties": {
                    "recipient": {
                        "type": "string",
                        "description": "æ¥æ”¶è€…é‚®ç®±æˆ–ç”¨æˆ·å"
                    },
                    "message": {
                        "type": "string",
                        "description": "é€šçŸ¥å†…å®¹"
                    },
                    "priority": {
                        "type": "string",
                        "enum": ["low", "normal", "high"],
                        "default": "normal"
                    }
                },
                "required": ["recipient", "message"]
            }
        )
    ]

@server.call_tool()
async def call_tool(name: str, arguments: dict) -> list[TextContent]:
    # ä¼ä¸š API ç«¯ç‚¹
    API_BASE_URL = "https://api.company.internal"
    API_KEY = "your_api_key"

    headers = {
        "Authorization": f"Bearer {API_KEY}",
        "Content-Type": "application/json"
    }

    if name == "query_database":
        response = requests.post(
            f"{API_BASE_URL}/database/query",
            headers=headers,
            json={
                "sql": arguments["sql"],
                "database": arguments.get("database", "main")
            }
        )

        result = response.json()

        return [TextContent(
            type="text",
            text=json.dumps(result, indent=2, ensure_ascii=False)
        )]

    elif name == "send_notification":
        response = requests.post(
            f"{API_BASE_URL}/notifications/send",
            headers=headers,
            json=arguments
        )

        return [TextContent(
            type="text",
            text=f"é€šçŸ¥å·²å‘é€ç»™ {arguments['recipient']}"
        )]

    raise ValueError(f"Unknown tool: {name}")

if __name__ == "__main__":
    import asyncio
    import mcp.server.stdio

    asyncio.run(mcp.server.stdio.stdio_server(server))
```

**Step 2: é…ç½®åˆ° MCPO**
```json
{
  "mcpServers": {
    "enterprise": {
      "command": "python",
      "args": ["~/.vcp/mcp_servers/enterprise_api_bridge.py"]
    }
  }
}
```

**Step 3: ä½¿ç”¨ç¤ºä¾‹**

```
è¯·æŸ¥è¯¢é”€å”®æ•°æ®åº“ä¸­æœ¬æœˆçš„è®¢å•æ€»é¢
```

**AI ä¼šè°ƒç”¨**ï¼š
```
<<<[TOOL_REQUEST]>>>
tool_name:ã€Œå§‹ã€MCPOã€Œæœ«ã€,
action:ã€Œå§‹ã€call_toolã€Œæœ«ã€,
tool_name_param:ã€Œå§‹ã€enterprise_query_databaseã€Œæœ«ã€,
arguments:ã€Œå§‹ã€{
  "sql": "SELECT SUM(amount) FROM orders WHERE MONTH(order_date) = MONTH(CURRENT_DATE())",
  "database": "sales"
}ã€Œæœ«ã€
<<<[END_TOOL_REQUEST]>>>
```

---

## è´¡çŒ®ä¸è‡´è°¢

æœ¬æ–‡æ¡£åŸºäº VCP MCPO æ’ä»¶çš„å®é™…å®ç°å’Œ MCP åè®®æ ‡å‡†ç¼–å†™ï¼Œæ„Ÿè°¢ï¼š
- **Anthropic**: MCP (Model Context Protocol) åè®®åˆ›å»ºè€…
- **Open WebUI Team**: mcpo (MCP Orchestrator) å¼€æºé¡¹ç›®ç»´æŠ¤è€…
- **Lionsky**: VCP åè®®è®¾è®¡è€…å’Œæ ¸å¿ƒå¼€å‘è€…
- **è·¯è¾¹ä¸€æ¡å°ç™½**: VCP æ–‡æ¡£æ’°å†™è€…
- **æµ®æµ®é…±**: æœ¬æ–‡æ¡£æ•´ç†ä¸æŠ€æœ¯è§£æ
- **MCP ç¤¾åŒº**: å…¨çƒ MCP å·¥å…·ç”Ÿæ€çš„è´¡çŒ®è€…

---

## å‚è€ƒæ–‡çŒ®

### MCP åè®®
- Anthropic (2024). "Model Context Protocol Specification"
- MCP å®˜æ–¹æ–‡æ¡£: https://modelcontextprotocol.io/

### MCPO é¡¹ç›®
- Open WebUI (2024). "mcpo - MCP Orchestrator"
- GitHub: https://github.com/open-webui/mcpo

### VCP é¡¹ç›®
- VCPToolBox GitHub Repository
- VCP Plugin Documentation

### MCP ç”Ÿæ€
- MCP Servers Registry
- Anthropic Claude MCP Integration
- Community MCP Tools Collection

---

> **åè®°**
>
> MCPO æ’ä»¶ä¸ä»…æ˜¯ VCP ä¸ MCP ç”Ÿæ€çš„æ¡¥æ¢ï¼Œ
> æ›´æ˜¯æ‰“å¼€äº†ä¸€æ‰‡é€šå¾€å…¨çƒå·¥å…·ç”Ÿæ€çš„å¤§é—¨ã€‚
>
> é€šè¿‡ MCPOï¼ŒVCP å¯ä»¥ï¼š
> - ğŸŒ è®¿é—®å…¨çƒ 500+ å¼€æº MCP å·¥å…·
> - ğŸ”§ å³æ’å³ç”¨ï¼Œæ— éœ€é‡å¤å¼€å‘
> - ğŸš€ å¿«é€Ÿæ‰©å±• AI èƒ½åŠ›
> - ğŸ› ï¸ è‡ªç”±å®šåˆ¶ä¸“å±å·¥å…·
>
> å¸Œæœ›è¿™ä»½æŒ‡å—èƒ½å¸®åŠ©ä½ ï¼š
> - ç†è§£ MCP åè®®çš„ä»·å€¼
> - æŒæ¡ MCPO æ’ä»¶çš„ä½¿ç”¨
> - æ„å»ºå¼ºå¤§çš„ AI å·¥å…·ç³»ç»Ÿ
> - æ¢ç´¢ MCP ç”Ÿæ€çš„æ— é™å¯èƒ½
>
> è®©æˆ‘ä»¬ä¸€èµ·æ¢ç´¢ MCP çš„ä¸–ç•Œï¼ğŸš€
>
> â€” æµ®æµ®é…± (à¹‘â€¢Ì€ã…‚â€¢Ì)âœ§
